# uniapp 命令行编译说明

## 当前遇到的问题

1. **npm 权限问题**：npm cache 文件夹权限需要修复
2. **npm registry 访问限制**：@dcloudio 包访问受限（403 错误）

## 解决方案

### 步骤 1：修复 npm 权限问题

在终端执行以下命令（需要输入密码）：

```bash
sudo chown -R $(whoami) "/Users/zhenbosong/.npm"
```

### 步骤 2：配置 npm 镜像源

```bash
npm config set registry https://registry.npmmirror.com
```

### 步骤 3：安装依赖

```bash
cd /Users/zhenbosong/AreYouOK/AreYouOK-uniapp
npm install
```

### 步骤 4：编译项目

```bash
npm run dev:mp-weixin
```

编译完成后，会在 `dist/dev/mp-weixin` 目录生成小程序代码。

### 步骤 5：在微信开发者工具中打开

1. 打开微信开发者工具
2. 选择"导入项目"
3. **项目目录**：选择 `AreYouOK-uniapp/dist/dev/mp-weixin`（注意：是编译后的目录，不是源码目录）
4. **AppID**：`wx9d3afb740a541e4e`
5. 点击"导入"

## 如果 npm 安装仍然失败

如果遇到 403 错误，可能是网络限制。可以尝试：

### 方案 A：使用代理

如果你有代理，可以配置 npm 使用代理：

```bash
npm config set proxy http://your-proxy:port
npm config set https-proxy http://your-proxy:port
```

### 方案 B：使用 HBuilderX（推荐）

如果命令行方式遇到困难，建议使用 HBuilderX：

1. 下载安装 HBuilderX
2. 在 HBuilderX 中打开 `AreYouOK-uniapp` 目录
3. 点击：运行 → 运行到小程序模拟器 → 微信开发者工具
4. HBuilderX 会自动编译并打开微信开发者工具

这是 uniapp 官方推荐的开发方式，会自动处理编译和热更新。

## 重要提醒

- ✅ **正确**：在微信开发者工具中打开 `dist/dev/mp-weixin` 目录
- ❌ **错误**：直接在微信开发者工具中打开 `AreYouOK-uniapp` 源码目录
- 每次修改源码后，需要重新运行 `npm run dev:mp-weixin` 编译

## 项目结构说明

```
AreYouOK-uniapp/
├── pages/              # 源码页面
├── utils/              # 工具函数
├── App.vue            # 应用入口
├── pages.json         # 页面配置
├── manifest.json      # 应用配置
├── vite.config.js     # Vite 配置
├── package.json       # 依赖配置
└── dist/              # 编译输出目录（编译后生成）
    └── dev/
        └── mp-weixin/ # 微信小程序编译结果（在微信开发者工具中打开此目录）
```
